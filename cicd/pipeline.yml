---
resources:
- name: go-repo
  type: git
  source:
    uri: {{git_repo_url}}
    branch: master
    private_key: {{git_private_key}}
    username: {{github_user}}

jobs:
- name: go-template-engine
  public: true
  plan:
  - get: go-repo
  - task: build
    file: go-repo/cicd/build.yml
  - task: release
    file: go-repo/cicd/release.yml
- name: release
  public: true
  plan:
  - get: go-template-engine
  - task: release
    file: go-repo/cicd/release.yml
